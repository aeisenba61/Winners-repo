<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>McDonalds Viz</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.3/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.3/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script>
  <!-- Our CSSs -->
  <link rel="stylesheet" href="{{ url_for('static', filename='stylesheets/styleStateMap.css') }}" >
  <style>

    .legend {
      vertical-align: top;
      padding: 75px 0 50px 20px;
    }

    .label {
      text-anchor: middle;
    }

    .label-name {
      font-weight: bold;
      text-decoration: underline;:
    }

    .label-value {
      font-weight: normal;
    }

  </style>
  

  <!--D3 cdn-->

</head>

<body>

<!-- Header -->
<div class="jumbotron" style = "background-color: #dd1021">
  <div class = "container" style = "text-align: center;">
    <h1 style = "font-weight: bold; color: #ffc300; text-shadow: 3px 4px 2px #000;">Where's Ronald and What's He Up To</h1>
    <p></p>
  </div>
</div>

<!-- Intro -->

<div class = "container">
  <div class="row">
    <div class="span4 collapse-group">
          <p><h4><b>Visualizing links between McDonalds locations, health, and poverty</b></h4><span class="collapse" id="viewdetails3"> McDonalds has become a ubiquitous part of the American landscape, with over <a href = "https://www.statista.com/statistics/230976/people-who-visited-mcdonalds-usa/" target = "_blank">105 million people eating McDonalds per month</a>. However, research has linked  fast food consumption to negative health outcomes such as <a href = "https://www.scientificamerican.com/article/fast-food-linked-to-obesi/" target = "_blank">obesity and diabetes</a>. Low income individuals also have <a href = "http://frac.org/obesity-health/low-income-food-insecure-people-vulnerable-poor-nutrition-obesity">greater availability of fast food</a>, which contribute to their <a href = "https://stateofobesity.org/socioeconomics-obesity/" target = "_blank">heightened risk for obesity</a>.<br><br></span> <a data-toggle="collapse" data-target="#viewdetails3">Learn why it matters >></a></p>
    </div>
  </div>
</div>



<!-- Dropdown menu -->
<div class = "container">
  <div class = "row">
  <label for = "selDataset">Select a variable:&nbsp;</label>
  <select id="selDataset" onchange="optionChanged(this.value)">
      <option disabled>Health</option>
      <option value = "diabetes">&nbsp;&nbsp;% diabetic adults</option>
      <option value = "obesity">&nbsp;&nbsp;% obese adults</option>
      <option disabled>Poverty</option>
      <option value = "snap">&nbsp;&nbsp;% households receiving SNAP benefits</option>
      <option value = "pov">&nbsp;&nbsp;% low income population</option>
  </select>
  </div>
</div>



<!-- original try for county and state choropleths -->
<div class = "container">
  <div id = "countyMap" style=   "width: 600; height: 400px;"></div>
</div>

<div class = "container">
  <div id = "stateMap" style="width: 600; height: 400px;"></div>
</div>


<!-- Second try for choropleths -->
<!-- <div class = "container">
    <iframe id= "countyMap" sandbox="allow-popups allow-scripts allow-forms allow-same-origin" marginwidth="0" marginheight="0" style="width: 1000; height:500px;" scrolling="no" src="../static/countyMap.js"></iframe>
</div> -->

<!-- <div class = "container">
    <iframe id= "stateMap" sandbox="allow-popups allow-scripts allow-forms allow-same-origin" marginwidth="0" marginheight="0" style="width: 1000; height:500px;" scrolling="no" src="../static/stateMap.js"></iframe>
</div> -->

<!-- Third try for choropleths -->
<!-- <div class="iframeContainer" style="background-color: #5CDB95;width: 800; height:500px; ">
  <iframe src="http://127.0.0.1:5000/templates/county.html" scrolling= "no" frameBorder="0" align="center"></iframe>
</div> -->

<!-- <div class="iframeContainer" style="background-color: #5CDB95;width: 800; height:500px; ">
  <iframe src="../state.html" scrolling= "no" frameBorder="0" align="center"></iframe>
</div> -->

<!-- Fourth try for choropleths -->
<!-- <div class="iframeContainer" style="background-color: #5CDB95;width: 800; height:500px; ">
  <iframe src="http://127.0.0.1:5000/templates/county.html" style="width:100%;height:100%;overflow:auto" name="mycountyiframe" id="countyMap" onLoad="injectCountyJS()" >IFrame is not supported</iframe>
</div>

<div class="iframeContainer" style="background-color: #5CDB95;width: 800; height:500px; ">
  <iframe src="http://127.0.0.1:5000/templates/county.html" style="width:100%;height:100%;overflow:auto" name="mystateiframe" id="stateMap" onLoad="injectStateJS()" >IFrame is not supported</iframe>
</div> -->




<!-- Scatterplot -->
<div class = "container">
  <div id = "scatter"></div>
</div>




<!-- Donuts -->
<div class = "container">
  <div id = "donut-legend"></div>
  <div id = "donut"></div>
</div>



<div class = "container">
    <div class="row">
    <hr>
        <h4 style = "font-weight:bold;">Data Sources</h4>
        <ul>
            <li><b>McDonalds locations:</b> GeoJSON file from lesson 17.3</li>
            <li><b>County population estimates:</b> US Census</li>
            <li><b>Health outcomes: </b>Center for Disease Control (CDC) <a href = "https://www.cdc.gov/diabetes/data/county.html" target = "_blank">county-level data</a>
                <ul>
                    <li><a href = "https://www.cdc.gov/diabetes/atlas/countydata/DMPREV/DM_PREV_ALL_STATES.xlsx" target = "_blank">Download</a> diabetes data</li>
                    <li><a href = "https://www.cdc.gov/diabetes/atlas/countydata/OBPREV/OB_PREV_ALL_STATES.xlsx" target = "_blank">Download</a> obesity data</li>
                </ul>
            </li>
            <li><b>Poverty:</b> Department of Agriculture (USDA) <a href = "https://www.cdc.gov/diabetes/data/county.html" target = "_blank">Food Access Research Atlas</a>
                <ul>
                     <li><a href = "https://www.fns.usda.gov/snap/supplemental-nutrition-assistance-program-snap" target = "_blank">Supplemental Nutrition Assistance Program (SNAP)</a> benefits are for low-income individuals and families</li>
                     <li><a href = "https://www.ers.usda.gov/data-products/food-access-research-atlas/download-the-data/" target = "_blank">Download</a> dataset</li>
                </ul>
            </li>
        </ul>
    </div>
</div>


<!-- for fourth choropleth try -->
<!-- <script>
  function injectStateJS() {
        var iFrameHead = window.frames["mystateiframe"].document.getElementsByTagName("head")[0];         
        var myscript = document.createElement('script');
        myscript.type = 'text/javascript';
        myscript.src = '../static/stateMap.js'; // replace this with your SCRIPT
        iFrameHead.appendChild(myscript);
}

  function injectCountyJS() {
        var iFrameHead = window.frames["mycountyiframe"].document.getElementsByTagName("head")[0];         
        var myscript = document.createElement('script');
        myscript.type = 'text/javascript';
        myscript.src = '../static/countyMap.js'; // replace this with your SCRIPT
        iFrameHead.appendChild(myscript);
}

</script> -->

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://d3js.org/d3.v4.0.0-alpha.15.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script src="{{ url_for('static', filename='donut.js') }}"></script>
<script src="{{ url_for('static', filename='scatter.js') }}"></script>
<script src="{{ url_for('static', filename='stateMap.js') }}"></script>
<!-- <script src="{{ url_for('static', filename='countyMap.js') }}"></script> -->

</html>
